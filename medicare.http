@medicare_HostAddress = http://localhost:5151

### Test 1: Get Users (Admin only - will likely fail without auth)

GET {{medicare_HostAddress}}/api/Admin/users
Content-Type: application/json
Authorization: Bearer 

### Test 3: 
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  "username": "kerery",
  "password": "Patient123!"
}


### Test 5: Register with string role
POST {{medicare_HostAddress}}/api/Auth/register
Content-Type: application/json

{
  "email": "pumawetazu-9562@yopmail.com",
  "username": "pumawetazu",
  "password": "Patient123!",
  "patientRecordId": null
  
}

###
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  
   "username": "admin",
   "password": "Admin@123"
}
###
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  
   "username": "johndoe",
   "password": "Doctor123!"
}
### Test 6: Test email confirmation (replace with actual values)
GET {{medicare_HostAddress}}/api/consultations/available-doctors
Authorization: Bearer 


###

### =============================================
### ROLE MANAGEMENT ENDPOINTS (Admin only)
### =============================================

###
### Get all available permissions
PUT {{medicare_HostAddress}}/api/doctors/my-profile
Content-Type: application/json
Authorization: Bearer 

{
  "fullName": "Dr. John Doe",
  "specializationId": "ad44816e-48bf-487b-b09b-4a1080db123b",
  "phoneNumber": "+1234567890",
  "bio": "xperienced doctor with 12 years in the field. Specializing in heart diseases and preventive care. Board certified and accepting new patients.",
  "yearsOfExperience": 5,
  "consultationFee": 5000.00
}



### Get all permissions
GET {{medicare_HostAddress}}/api/doctors
Authorization: Bearer 






### =============================================
### USER MANAGEMENT ENDPOINTS (Admin only)
### =============================================

### Get all users
GET {{medicare_HostAddress}}/api/Admin/users
Content-Type: application/json
Authorization: Bearer 

### Create new user (Admin can assign specific role)
POST {{medicare_HostAddress}}/api/Admin/users
Content-Type: application/json
Authorization: Bearer 

{
  "email": "jazeqot@mailinator.com",
  "username": "jazeqot",
  "password": "Doctor123!",
  "role": "Doctor"
}
###
POST {{medicare_HostAddress}}/api/Admin/doctors
Content-Type: application/json
Authorization: Bearer e

{
 
}

### create specialization
POST {{medicare_HostAddress}}/api/Admin/specializations
Content-Type: application/json
Authorization: Bearer 

{
  "name": "Ortimetics",
  "description": "Specialize in eye treatment."
}
###
GET {{medicare_HostAddress}}/api/Admin/specializations
Content-Type: application/json
Authorization: Bearer 
### Delete user
DELETE {{medicare_HostAddress}}/api/Admin/users/REPLACE_WITH_USER_ID
Content-Type: application/json
Authorization: Bearer {{admin_token}}

### =============================================
### PATIENT MANAGEMENT ENDPOINTS
### =============================================

### Get patient record (requires CanViewPatient policy)
GET {{medicare_HostAddress}}/api/Patients/REPLACE_WITH_PATIENT_ID
Content-Type: application/json
Authorization: Bearer {{doctor_token}}

### Update patient record (requires CanUpdatePatient policy)
PUT {{medicare_HostAddress}}/api/Patients/REPLACE_WITH_PATIENT_ID
Content-Type: application/json
Authorization: Bearer {{doctor_token}}

{
  "fullName": "Updated Patient Name"
}

### Add vital signs to patient
POST {{medicare_HostAddress}}/api/Patients/REPLACE_WITH_PATIENT_ID/vitals
Content-Type: application/json
Authorization: Bearer {{nurse_token}}

{
  "type": "BP",
  "value": "120/80",
  "notes": "Normal blood pressure",
  "recordedAt": "2024-01-15T10:30:00Z"
}

### Prescribe medication to patient (requires CanPrescribe policy)
POST {{medicare_HostAddress}}/api/book
Content-Type: application/json
Authorization: Bearer {{doctor_token}}

{
  "medication": "Amoxicillin",
  "dosage": "500mg",
  "createdAt": "2024-01-15T10:30:00Z"
}

### Get patient test results
GET {{medicare_HostAddress}}/api/Patients/REPLACE_WITH_PATIENT_ID/tests
Content-Type: application/json
Authorization: Bearer {{doctor_token}}

### =============================================
### VARIABLES SECTION - Store tokens here after login
### =============================================

### After successful login, copy the token here:
### @name admin_login
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "Admin@123"
}

###
@admin_token = {{admin_login.response.body.$.token}}

### Doctor login
# @name doctor_login
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  "username": "jazeqot",
  "password": "Doctor@123!"
}

###
@doctor_token = {{doctor_login.response.body.$.token}}

### Nurse login
# @name nurse_login
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  "username": "nursemary",
  "password": "Nurse@123"
}

###
@nurse_token = {{nurse_login.response.body.$.token}}

### Patient login
# @name patient_login
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json


{
  "username": "kiqodoju",
  "password": "Patient@123!"
}


###
GET {{medicare_HostAddress}}/api/auth/me
Content-Type: application/json
Authorization: Bearer  



### Book a consultation (Patient only)
POST {{medicare_HostAddress}}/api/consultations/book
Content-Type: application/json
Authorization: Bearer 

{
  "doctorId": "ab7f1421-7a90-4b2a-b3a6-06c850a00c86",
  "patientRecordId": "5e0ec61d-72c4-483e-95f4-47094831bb9b", 
  "scheduledAt": "2024-12-20T10:00:00",
  "consultationType": 1,
  "symptoms": "Headache and fever"
}

### Login as jazeqot (the doctor with isAvailable: false)
# @name jazeqot_login
POST {{medicare_HostAddress}}/api/Auth/login
Content-Type: application/json

{
  "username": "jazeqot",
  "password": "Doctor123!"
}

### Add availability for jazeqot (Monday-Friday, 9AM-5PM)
POST {{medicare_HostAddress}}/api/doctors/my-availability
Content-Type: application/json
Authorization: Bearer 

{
  "dayOfWeek": 5,
  "startTime": "09:00:00",
  "endTime": "17:00:00",
  "isRecurring": true,
  "maxAppointmentsPerSlot": 5
}




# This creates availability for a specific date only.

# json
# {
#   "dayOfWeek": 5,
#   "startTime": "09:00:00",
#   "endTime": "17:00:00",
#   "isRecurring": false,
#   "specificDate": "2025-11-07T00:00:00Z",
#   "maxAppointmentsPerSlot": 5
# }
